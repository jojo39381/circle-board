{"ast":null,"code":"var _jsxFileName = \"/Users/josephyeh/Desktop/internship-circle/src/App.js\";\nimport React, { useState } from 'react';\nimport { v4 as uuid } from 'uuid';\nimport { DragDropContext, Droppable } from 'react-beautiful-dnd';\nimport Column from './components/Column.jsx';\nimport Header from './components/Header.jsx';\n/* random image */\n\nconst imageUrl = 'https://source.unsplash.com/random/?people/';\nvar months = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\n\nfunction getRandomHardDate() {\n  return months[Math.floor(Math.random() * 12)] + ' ' + Math.floor(Math.random() * 30 + 2);\n}\n\nfunction getRandomColor() {\n  return '#' + Math.floor(Math.random() * 16777215).toString(16);\n}\n/* imageurl needs uuid/number at the end to be random so browser don't cache the image */\n\n\nconst backlog = [{\n  id: uuid(),\n  content: 'Final QA',\n  assigned: imageUrl + uuid(),\n  date: getRandomHardDate(),\n  color: getRandomColor()\n}, {\n  id: uuid(),\n  content: 'Forms submit data properly',\n  assigned: imageUrl + uuid(),\n  date: getRandomHardDate(),\n  color: getRandomColor()\n}, {\n  id: uuid(),\n  content: 'Links across pages',\n  assigned: imageUrl + uuid(),\n  date: getRandomHardDate(),\n  color: getRandomColor()\n}];\nconst todo = [{\n  id: uuid(),\n  content: 'Do Homework',\n  assigned: imageUrl + uuid(),\n  date: getRandomHardDate(),\n  color: getRandomColor()\n}, {\n  id: uuid(),\n  content: \"Finish Important Project for boss\",\n  assigned: imageUrl + uuid(),\n  date: getRandomHardDate(),\n  color: getRandomColor()\n}];\n/* columns from the server, currently hard coded. */\n\nconst columnsFromServer = {\n  [uuid()]: {\n    name: 'Backlog',\n    items: backlog\n  },\n  [uuid()]: {\n    name: 'Ready To Do',\n    items: todo\n  },\n  [uuid()]: {\n    name: 'In Progress',\n    items: []\n  },\n  [uuid()]: {\n    name: 'Done',\n    items: []\n  }\n};\n/* function for when the drag ends, accounts for when dragging to other columns or to nowhere */\n\nconst dragEnd = (result, columns, setColumns) => {\n  if (!result.destination) return;\n  const {\n    source,\n    destination\n  } = result;\n\n  if (source.droppableId !== destination.droppableId) {\n    const sourceColumn = columns[source.droppableId];\n    const destColumn = columns[destination.droppableId];\n    const sourceItems = [...sourceColumn.items];\n    const destItems = [...destColumn.items];\n    const [removed] = sourceItems.splice(source.index, 1);\n    destItems.splice(destination.index, 0, removed);\n    setColumns({ ...columns,\n      [source.droppableId]: { ...sourceColumn,\n        items: sourceItems\n      },\n      [destination.droppableId]: { ...destColumn,\n        items: destItems\n      }\n    });\n  } else {\n    const column = columns[source.droppableId];\n    const copy = [...column.items];\n    const [removed] = copy.splice(source.index, 1);\n    copy.splice(destination.index, 0, removed);\n    setColumns({ ...columns,\n      [source.droppableId]: { ...column,\n        items: copy\n      }\n    });\n  }\n};\n\nfunction App() {\n  const mongoose = require(\"mongoose\");\n\n  mongoose.connect(\"mongodb://localhost:27017/todolistDB\", {\n    useNewUrlParser: true,\n    useUnifiedTopology: true\n  });\n  const itemsSchema = {\n    id: String,\n    content: String,\n    assigned: String,\n    date: String,\n    color: String\n  };\n  const Item = mongoose.model(\"Item\", itemsSchema);\n  const item1 = new Item({\n    id: \"haha\",\n    content: \"lmao\",\n    assigned: \"asldjnad\",\n    date: \"aosjdnad\",\n    color: \"alsjdnasd\"\n  });\n  const item2 = new Item({\n    id: \"haha\",\n    content: \"lmao\",\n    assigned: \"asldjnad\",\n    date: \"aosjdnad\",\n    color: \"alsjdnasd\"\n  });\n  const defaultItems = [item1, item2];\n  Item.insertMany(defaultItems, function (err) {\n    if (err) {\n      console.log(err);\n    } else {\n      console.log(\"Success\");\n    }\n  });\n  const [columns, setColumns] = useState(columnsFromServer);\n  /* add to column the new task or update it */\n\n  function addToColumn(destination, id, task) {\n    const column = columns[destination];\n    var updated = [...column.items];\n    const object = {\n      id: uuid(),\n      content: task.title,\n      assigned: imageUrl + uuid(),\n      date: task.date,\n      color: getRandomColor()\n    };\n\n    if (id != null) {\n      var index = updated.findIndex(x => x.id === id);\n      updated[index] = object;\n    } else {\n      updated.push(object);\n    }\n\n    setColumns({ ...columns,\n      [destination]: { ...column,\n        items: updated\n      }\n    });\n  }\n\n  function deleteFromColumn(destination, id) {\n    const column = columns[destination];\n    var updated = [...column.items];\n    var index = updated.findIndex(x => x.id === id);\n    updated.splice(index, 1);\n    setColumns({ ...columns,\n      [destination]: { ...column,\n        items: updated\n      }\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: 'flex',\n      justifyContent: 'center',\n      height: '100%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(DragDropContext, {\n    onDragEnd: result => dragEnd(result, columns, setColumns),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 13\n    }\n  }, Object.entries(columns).map(([id, column]) => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center'\n      },\n      key: uuid(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 25\n      }\n    }, column.name), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        margin: 8\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Droppable, {\n      droppableId: id,\n      key: id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 25\n      }\n    }, (provided, snapshot) => {\n      return /*#__PURE__*/React.createElement(Column, {\n        provided: provided,\n        snapshot: snapshot,\n        column: column,\n        addToColumn: addToColumn,\n        id: id,\n        editTask: addToColumn,\n        deleteTask: deleteFromColumn,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 37\n        }\n      });\n    })));\n  }))));\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/josephyeh/Desktop/internship-circle/src/App.js"],"names":["React","useState","v4","uuid","DragDropContext","Droppable","Column","Header","imageUrl","months","getRandomHardDate","Math","floor","random","getRandomColor","toString","backlog","id","content","assigned","date","color","todo","columnsFromServer","name","items","dragEnd","result","columns","setColumns","destination","source","droppableId","sourceColumn","destColumn","sourceItems","destItems","removed","splice","index","column","copy","App","mongoose","require","connect","useNewUrlParser","useUnifiedTopology","itemsSchema","String","Item","model","item1","item2","defaultItems","insertMany","err","console","log","addToColumn","task","updated","object","title","findIndex","x","push","deleteFromColumn","display","justifyContent","height","Object","entries","map","flexDirection","alignItems","margin","provided","snapshot"],"mappings":"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","sourcesContent":["import React, {useState} from 'react';\nimport {v4 as uuid} from 'uuid';\nimport {DragDropContext, Droppable} from 'react-beautiful-dnd';\nimport Column from './components/Column.jsx';\nimport Header from './components/Header.jsx';\n/* random image */\nconst imageUrl = 'https://source.unsplash.com/random/?people/';\nvar months = [ \"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \n           \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\" ];\n\nfunction getRandomHardDate() {\n    return months[Math.floor(Math.random() * 12)] + ' ' + Math.floor(Math.random() * 30 + 2)\n}\n\nfunction getRandomColor() {\n    return '#'+Math.floor(Math.random()*16777215).toString(16);\n}\n/* imageurl needs uuid/number at the end to be random so browser don't cache the image */\nconst backlog = [\n    {id: uuid(), content: 'Final QA', assigned:imageUrl + uuid(), date: getRandomHardDate(), color: getRandomColor()},\n    {id: uuid(), content: 'Forms submit data properly', assigned:imageUrl + uuid(), date: getRandomHardDate(), color: getRandomColor()},\n    {id: uuid(), content: 'Links across pages', assigned:imageUrl + uuid(), date: getRandomHardDate(), color: getRandomColor()}\n]\nconst todo = [\n    {id: uuid(), content: 'Do Homework', assigned:imageUrl + uuid(), date: getRandomHardDate(), color: getRandomColor()},\n    {id: uuid(), content: \"Finish Important Project for boss\", assigned:imageUrl + uuid(), date: getRandomHardDate(), color: getRandomColor()}\n]\n/* columns from the server, currently hard coded. */\nconst columnsFromServer = \n    {   [uuid()] : {\n            name: 'Backlog',\n            items: backlog\n        },\n        [uuid()]: {\n            name: 'Ready To Do',\n            items: todo\n        },\n        [uuid()]: {\n            name: 'In Progress',\n            items: []\n        },\n        [uuid()]: {\n            name: 'Done',\n            items:[]\n        }\n    };\n\n/* function for when the drag ends, accounts for when dragging to other columns or to nowhere */\nconst dragEnd = (result, columns, setColumns) => {\n    if (!result.destination) return;\n    const {source, destination } = result;\n    if(source.droppableId !== destination.droppableId) {\n        const sourceColumn = columns[source.droppableId];\n        const destColumn = columns[destination.droppableId];\n        const sourceItems = [...sourceColumn.items];\n        const destItems = [...destColumn.items];\n        const [removed] = sourceItems.splice(source.index, 1);\n        destItems.splice(destination.index, 0, removed);\n        setColumns({\n            ...columns,\n            [source.droppableId]:  {\n                ...sourceColumn, \n                items: sourceItems\n            },\n            [destination.droppableId]: {\n                ...destColumn, \n                items: destItems\n            }\n        })\n    }\n    else {\n    const column = columns[source.droppableId];\n    const copy = [...column.items];\n    const [removed] = copy.splice(source.index, 1);\n    copy.splice(destination.index, 0, removed);\n    setColumns({\n      ...columns,\n      [source.droppableId]: {\n        ...column,\n        items: copy\n      }\n    });\n    }\n};\nfunction App() {\n\n    const mongoose = require(\"mongoose\");\n    mongoose.connect(\"mongodb://localhost:27017/todolistDB\", \n    {useNewUrlParser: true,\n    useUnifiedTopology: true}\n    \n    );\n\n    const itemsSchema = {\n        id:String,\n        content: String,\n        assigned: String,\n        date: String,\n        color: String\n        \n    };\n    const Item = mongoose.model(\n        \"Item\", itemsSchema\n    );\n    const item1 = new Item({\n        id: \"haha\",\n        content:\"lmao\",\n        assigned:\"asldjnad\",\n        date:\"aosjdnad\",\n        color:\"alsjdnasd\"\n    });\n    const item2 = new Item({\n        id: \"haha\",\n        content:\"lmao\",\n        assigned:\"asldjnad\",\n        date:\"aosjdnad\",\n        color:\"alsjdnasd\"\n    });\n    const defaultItems = [item1, item2];\n    Item.insertMany(defaultItems, function(err) {\n        if (err) {\n            console.log(err);\n\n        }\n        else {\n            console.log(\"Success\");\n        }\n    });\n\n    const [columns, setColumns] = useState(columnsFromServer);\n    /* add to column the new task or update it */\n    function addToColumn(destination, id, task) {\n        const column = columns[destination]\n        var updated = [...column.items]\n        const object = {id: uuid(), content: task.title, assigned:imageUrl + uuid(), date: task.date, color: getRandomColor()}\n        if (id != null) {\n            var index = updated.findIndex( x => x.id === id)   \n            updated[index] = object\n        }\n        else {\n        updated.push(object)\n        }\n        setColumns({\n            ...columns,\n            [destination]: {\n              ...column,\n              items: updated\n            }\n          });\n    }\n    function deleteFromColumn(destination, id) {\n        const column = columns[destination]\n        var updated = [...column.items]\n        var index = updated.findIndex( x => x.id === id) \n        updated.splice(index, 1)\n        setColumns({\n            ...columns,\n            [destination]: {\n              ...column,\n              items: updated\n            }\n          });\n    }\n    \n    return (\n        <div>\n        <Header></Header>\n        <div style={{ display: 'flex', justifyContent: 'center', height: '100%'}}>\n            <DragDropContext onDragEnd={result => dragEnd(result, columns, setColumns)}>\n                {Object.entries(columns).map(([id, column]) => {\n                    return (\n                        <div style={{display:'flex', flexDirection: 'column', alignItems: 'center'}} key={uuid()}>\n                        <h2>{column.name}</h2>\n                        <div style ={{margin: 8}}>\n                        <Droppable droppableId={id} key={id}>\n                            {(provided, snapshot) => {\n                                return (\n                                    <Column provided={provided} snapshot={snapshot} column={column} addToColumn={addToColumn} id={id} editTask={addToColumn} deleteTask={deleteFromColumn}/>\n                                )\n                            }}\n                        </Droppable>\n                    </div>\n                    </div>\n                    )\n                })}\n            </DragDropContext>\n        </div>\n        </div>\n    )\n}\n\nexport default App"]},"metadata":{},"sourceType":"module"}